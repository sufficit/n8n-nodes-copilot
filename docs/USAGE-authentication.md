# GitHub Copilot n8n Node - Authentication Guide

## Description
This document describes the authentication requirements for the GitHub Copilot n8n community node, based on testing and validation.

## Critical Authentication Requirement

**IMPORTANT**: The GitHub Copilot CLI only accepts tokens generated by the GitHub CLI itself. Personal Access Tokens created through the GitHub website **DO NOT WORK**.

## Correct Authentication Process

1. **Install GitHub CLI** (if not already installed):
   ```bash
   # On Ubuntu/Debian
   sudo apt install gh
   
   # On CentOS/RHEL
   sudo yum install gh
   
   # On macOS
   brew install gh
   ```

2. **Login using GitHub CLI**:
   ```bash
   gh auth login
   ```
   Follow the prompts to authenticate with GitHub.

3. **Generate token for external use**:
   ```bash
   gh auth token
   ```
   This command will output a token that works with GitHub Copilot.

4. **Use the token in n8n**:
   - Copy the token from step 3
   - In your n8n workflow, add the GitHub Copilot node
   - Paste the token in the "GitHub Token (Optional)" field

## What DOES NOT Work

- Personal Access Tokens created at https://github.com/settings/tokens
- OAuth2 tokens from GitHub Apps
- Classic Personal Access Tokens
- Fine-grained Personal Access Tokens

## Architecture Decision

After extensive testing, we discovered that GitHub Copilot CLI has very specific authentication requirements that don't follow standard GitHub API patterns. This led to a major architectural simplification:

- **Removed**: Complex credential system with multiple authentication types
- **Simplified**: Single optional token parameter with clear documentation
- **Result**: Much simpler user experience with proper authentication guidance

## Error Messages

If you see a 401 authentication error, the most common cause is using the wrong type of token. Always use tokens generated by `gh auth token` after `gh auth login`.

## Testing Results

During development, we tested multiple authentication methods:
1. ✅ GitHub CLI login + token generation (WORKS)
2. ❌ Personal Access Tokens from GitHub website (FAILS)
3. ❌ OAuth2 authentication (FAILS)
4. ❌ Manual token entry without CLI setup (FAILS)

## Node Usage

The node can be used in two ways:

1. **Without token**: Uses system-wide GitHub CLI authentication (if `gh auth login` was run)
2. **With token**: Uses the provided token from `gh auth token` command

## Version History

- **v1.0.0**: Complex credential system with multiple authentication types
- **v2.0.0**: Simplified to single optional token parameter based on authentication discoveries

## Support

If you encounter authentication issues:
1. Verify you're using a token from `gh auth token`
2. Ensure GitHub CLI is properly authenticated with `gh auth status`
3. Check that GitHub Copilot is available on your account